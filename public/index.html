<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
    <script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-map.js?key=GaSGgYNeOpwp9R8mJ421WfsT4EGGHM0L"></script>
    <title>open_data_gvl</title>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but open_data_gvl doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>

    <!--<button class="open-data--utility-control" style="float:left;margin-right:10px;" id="refresh_map_button">Refresh</button>-->
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script>
      function initiateMap() {
        window.L = L;
        let mapLayer = MQ.mapLayer(), map;

        map = L.map('the_map', {
          layers: mapLayer,
          center: [ 34.8507212,-82.3985128 ],
          zoom: 12
        });
        window.my_map = map;

        L.control.layers({
          'Map': mapLayer,
          'Hybrid': MQ.hybridLayer(),
          'Satellite': MQ.satelliteLayer(),
          'Dark': MQ.darkLayer(),
          'Light': MQ.lightLayer()
        }).addTo(map);
        /*
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3BhY2Vjb3dib3kzMjYiLCJhIjoiY2pyanBrZGpnMGY3OTQzcGRoOHVxbmlkYSJ9.7B6jtIHWWJqV78NB5rB-_g', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'your.mapbox.access.token'
        }).addTo(window.my_map);
        */
      }

      window.initializeMap = function () {
        window.L = L;
        let mapLayer = MQ.mapLayer(), map;

        map = L.map('the_map', {
          layers: mapLayer,
          center: [ 34.8507212,-82.3985128 ],
          zoom: 12
        });
        window.my_map = map;

        L.control.layers({
          'Map': mapLayer,
          'Hybrid': MQ.hybridLayer(),
          'Satellite': MQ.satelliteLayer(),
          'Dark': MQ.darkLayer(),
          'Light': MQ.lightLayer()
        }).addTo(map);
        /*
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3BhY2Vjb3dib3kzMjYiLCJhIjoiY2pyanBrZGpnMGY3OTQzcGRoOHVxbmlkYSJ9.7B6jtIHWWJqV78NB5rB-_g', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'your.mapbox.access.token'
        }).addTo(window.my_map);
        */
      }

      /*
      document.getElementById("refresh_map_button").addEventListener("click", function() {
        initializeMap();
      });
      */
/*
      window.map_timeout = setTimeout(function (){
        if (document.querySelector("#the_map")) {
          initiateMap();
          clearTimeout(window.map_timeout);
        }
        console.log("No map yet.")
      }, 1000);
*/
    </script>
  </body>
</html>